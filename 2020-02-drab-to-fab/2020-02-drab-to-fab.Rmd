---
title: "From drab to fab"
subtitle: "Teaching visualisation via incremental improvements"
author: "Mine Ã‡etinkaya-Rundel and Maria Tackett"
date: "February 2020"
output: 
  bookdown::html_document2: 
    theme: readable
    fig_cap: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(scales)
library(knitr)
```

In our September 2014 column titled we wrote about five concrete reasons your students should be learning to analyze data in the reproducible paradigm. 
One of the reasons we gave was that ``[t]his workflow establishes the norm that data analysis and science in general should be an iterative process". 
Just like data analysis in general, data visualisation is also an interative process. 

[TODO: Better link between two paragraphs]

It can be very inspirational to share highly polished data visualisations with students. 
A few of our favourite visualisations to bring to the classroom are text analysis of Donald Trump's tweets by David Robinbson ([varianceexplained.org/r/trump-tweets](http://varianceexplained.org/r/trump-tweets/)), the Dialect Survey by Joshua Katz ([joshkatz.co/dialect.html](http://joshkatz.co/dialect.html)), and map of America's weather related disasters by Tim Meko ([washingtonpost.com/graphics/2019/national/mapping-disasters](https://www.washingtonpost.com/graphics/2019/national/mapping-disasters)). 
We also love the NY Times series What's Going on in This Graph? ([nytimes.com/column/whats-going-on-in-this-graph](https://www.nytimes.com/column/whats-going-on-in-this-graph)) as well as just about any visualisation from the Flowing Data blog by Nathan Yau ([flowingdata.com](https://flowingdata.com/)), The Pudding ([pudding.cool](https://pudding.cool/)) and The Functional Art blog by Alberto Cairo ([thefunctionalart.com](http://www.thefunctionalart.com/)). 
For example, the stories on how the American work day changed over 15 years ([flowingdata.com/2019/07/16/how-the-american-work-day-changed-in-15-years](https://flowingdata.com/2019/07/16/how-the-american-work-day-changed-in-15-years)) and on gender tropes in film with screen direction ([pudding.cool/2017/08/screen-direction](https://pudding.cool/2017/08/screen-direction)) both feature in-depth and enlightening but simple visualisations that tell a meaningful story. 
We like these examples because their message is clear enough to glean quickly, but one can extract deeper insights by looking at them for a bit longer, a bit more closely.

All of these visualisations share one thing in common -- they are incredibly polished. 
It is possible for a student just starting off to think "well, I could never do that!". 
Or perhaps worse, to think that they can, and not get to something as impressive on their first or second try and get discouraged. 
We believe that it's important to show students not only the end result, but also the process of building a meaningful data visualisation. 
This journey can be incredibly educational in its own, as each step of the improvement is an opportunity to teach a new data visualisation or wrangling technique. 
In this column we walk through one such example. 

## The drab {-}

The data come from The American Association of University Professors (AAUP), which is a nonprofit membership association of faculty and other academic professionals. 
In 2013, the AAUP published a report on Trends in Instructional Staff Employment Status, which includes a visualisation that looks like the following.

```{r echo=FALSE, fig.cap="Reproduction of visualisation included in the 2013 AAUP report on titled Trends in Instructional Staff Employment Status"}
knitr::include_graphics("img/staff-employment.png")
```

The visualisation is a bit difficult to make sense of, and this is the point. 
We show this visualisation to the students at the beginning of the class, with some clarification on what the y-axis means (various levels of staff at the university who teach classes, ranging from graduate students to full-time tenured faculty) and ask them to interpret the visualisation in teams. 
Eventually students are able to identify the main message of the story: the highest proportion of instructors are part-time faculty, and this proportion has been increasing from 1975 to 2011. 
Along with this main message, students also naturally come to the conclusion that this is not the best visualisation of these data, and in fact, the visualisation makes it hides the main message instead of making it loud and clear.

At this point it's a worthwhile exercise to ask students to start thinking about how this visualisation can be improved. 
Instead of just talking through it, we ask students to sketch the visualisations on a piece of paper. 
They're not expected to actually create an accurate visualisation via a sketch, but we recommend they label their axes, mark their axis ranges, and decide on which geometric object(s) they plan on using to represent their data (points, lines, bars, etc.).
Having though through this, and especially having put it down on paper with a sketch, gives the students a path to follow in the next step when they're using software to build this visualisation. 

[TO DO: SOME SENTENCE LIKE BELOW IS AN EXAMPLE...]
[TO DO: INSERT SKETCH WITH X-AXIS YEAR, Y-AXIS PERCENTAGE]

## Onto the fab {-}

Next is improving this visualisation. 
One can do this as a class exercise, with interactive exercises and just-in-time teaching sprinkled in, or give it as an assignment students work on outside of class. 
For the latter, we have had a great experience with assigning this as a team exercise. 
If the class size allows, it's also a great idea to then have students present their process (both technical and thought processes) for improving so that they can see the various approaches each team takes.

Next we walk through a possible path to ``fab" (an improved visualisation), highlighting opportunities for instruction along the way. We also present a series of questions for discussion.

### Step 1. Get the data {-}

The dataset provided in the report is in the following format.

```{r echo=FALSE, message=FALSE}
staff_wide <- read_csv("data/instructional-staff.csv")
staff_wide %>% kable()
```

1. What does each row represent in the dataset? What does each column represent? What do the numbers represent? What does each column add up to, and why?

### Step 2. Reshape the data {-}

[TO DO: SOME LANGUAGE AROUND WE NEED PERCENTAGES TO BE IN A COLUMN]

```{r}
staff_long <- staff_wide %>%
  pivot_longer(cols = -faculty_type, names_to = "year", 
               values_to = "percentage") %>%
  mutate(percentage = as.numeric(percentage))

staff_long %>%
  print(n = 5)
```

### Step 3. Recreare the plot {-}

Something is not right...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, color = faculty_type)) +
  geom_col(position = "dodge") + 
  coord_flip()
```

This is much better...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, fill = faculty_type)) +
  geom_col(position = "dodge") + 
  coord_flip()
```

### Step 4. Improve the plot {-}

This tells the story even better...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, fill = faculty_type)) +
  geom_col() + 
  coord_flip()
```

But lines would be better...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, group = faculty_type, 
             color = faculty_type)) +
  geom_line()
```

And we can take it even one step further...

```{r}
staff_long %>%
  mutate(part_time = if_else(faculty_type == "Part-Time Faculty", "Part-Time Faculty", "Other Faculty")) %>%
  ggplot(aes(x = year, y = percentage/100, group = faculty_type, 
             color = part_time)) +
  geom_line() +
  scale_color_manual(values = c("gray", "red"))
```

### Step 5. Pushing it a bit more {-}

```{r}
staff_long %>%
  mutate(part_time = if_else(faculty_type == "Part-Time Faculty", "Part-Time Faculty", "Other Faculty")) %>%
  ggplot(aes(x = year, y = percentage/100, group = faculty_type, 
             color = part_time)) +
  geom_line() +
  scale_color_manual(values = c("gray", "red")) +
  scale_y_continuous(labels = percent_format(accuracy = 1)) +
  theme_minimal() +
  labs(
    title = "Instructional staff employment trends",
    x = "Year",
    y = "Percentage",
    color = ""
  ) +
  theme(legend.position = "bottom")
```







## Further reading {-}

1. Joshua Katz, Dialect Survey - joshkatz.co/dialect.html
2. David Robinson, Text analysis of Trump's tweets confirms he writes only the (angrier) Android half - http://varianceexplained.org/r/trump-tweets/
2. 
