---
title: "From drab to fab"
subtitle: "Teaching visualisation via incremental improvements"
author: "Mine Ã‡etinkaya-Rundel and Maria Tackett"
date: "February 2020"
output: 
  bookdown::html_document2: 
    theme: readable
    fig_cap: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(scales)
library(knitr)
```

In our September 2014 column titled we wrote about five concrete reasons your students should be learning to analyze data in the reproducible paradigm. 
One of the reasons we gave was that ``[t]his workflow establishes the norm that data analysis and science in general should be an iterative process". 
Just like data analysis in general, creating an effective data visualisation is also an interative process. 

[TODO: Better link between two paragraphs]

It can be very inspirational to share highly polished data visualisations with students. 
A few of our favourite visualisations to bring to the classroom are text analysis of Donald Trump's tweets by David Robinbson ([varianceexplained.org/r/trump-tweets](http://varianceexplained.org/r/trump-tweets/)), the Dialect Survey by Joshua Katz ([joshkatz.co/dialect.html](http://joshkatz.co/dialect.html)), and map of America's weather related disasters by Tim Meko ([washingtonpost.com/graphics/2019/national/mapping-disasters](https://www.washingtonpost.com/graphics/2019/national/mapping-disasters)). 
We also love the NY Times series What's Going on in This Graph? ([nytimes.com/column/whats-going-on-in-this-graph](https://www.nytimes.com/column/whats-going-on-in-this-graph)) as well as just about any visualisation from the Flowing Data blog by Nathan Yau ([flowingdata.com](https://flowingdata.com/)), The Pudding ([pudding.cool](https://pudding.cool/)) and The Functional Art blog by Alberto Cairo ([thefunctionalart.com](http://www.thefunctionalart.com/)). 
For example, the stories on how the American work day changed over 15 years ([flowingdata.com/2019/07/16/how-the-american-work-day-changed-in-15-years](https://flowingdata.com/2019/07/16/how-the-american-work-day-changed-in-15-years)) and on gender tropes in film with screen direction ([pudding.cool/2017/08/screen-direction](https://pudding.cool/2017/08/screen-direction)) both feature in-depth and enlightening but simple visualisations that tell a meaningful story. 
We like these examples because their message is clear enough to glean quickly, but one can extract deeper insights by looking at them for a bit longer, a bit more closely.

All of these visualisations share one thing in common -- they are incredibly polished. 
It is possible for a student just starting off to think "well, I could never do that!". 
Or perhaps worse, to think that they can, and not get to something as impressive on their first or second try and get discouraged. 
We believe that it's important to show students not only the end result, but also the process of building a meaningful data visualisation. 
This journey can be incredibly educational in its own, as each step of the improvement is an opportunity to teach a new data visualisation or wrangling technique. 
In this column we walk through one such example. 

## The drab {-}

The data come from The American Association of University Professors (AAUP), which is a nonprofit membership association of faculty and other academic professionals. 
In 2013, the AAUP published a report on Trends in Instructional Staff Employment Status, which includes a visualisation that looks like the following.

```{r echo=FALSE, fig.cap="Reproduction of visualisation included in the 2013 AAUP report on titled Trends in Instructional Staff Employment Status"}
knitr::include_graphics("img/staff-employment.png")
```

The visualisation is a bit difficult to make sense of, and this is the point. 
We show this visualisation to the students at the beginning of the class, with some clarification on what the y-axis means (various levels of staff at the university who teach classes, ranging from graduate students to full-time tenured faculty) and ask them to interpret the visualisation in teams. 
Eventually students are able to identify the main message of the story: the highest proportion of instructors are part-time faculty, and this proportion has been increasing from 1975 to 2011. 
Along with this main message, students also naturally come to the conclusion that this is not the best visualisation of these data, and in fact, the visualisation hides the main message instead of making it loud and clear.

At this point it's a worthwhile exercise to ask students to start thinking about how this visualisation can be improved. 
Instead of just talking through it, we ask students to sketch the visualisations on a piece of paper. 
They're not expected to actually create an accurate visualisation via a sketch, but we recommend they label their axes, mark their axis ranges, and decide on which geometric object(s) they plan on using to represent their data (points, lines, bars, etc.).
Having though through this, and especially having put it down on paper with a sketch, gives the students a path to follow in the next step when they're using software to build this visualisation. 

[TO DO: SOME SENTENCE LIKE BELOW IS AN EXAMPLE...]
[TO DO: INSERT SKETCH WITH X-AXIS YEAR, Y-AXIS PERCENTAGE]

## Onto the fab {-}

Next is improving this visualisation. 
One can do this during class, with interactive exercises and just-in-time teaching sprinkled throughout, or give it as an assignment students work on outside of class. 
For the latter, we have had success in assigning this as a team exercise in which students write a critique of the original visualization and then create an improved one. After a few days, teams present their visualizations during class while describing how they have improved upon the original one. If the class size allows, it's also a great idea to then have students present their process (both technical and thought processes) for improving the visualization, so they can see the various approaches each team has taken. 

Now we will walk through a possible path to "fab" (an improved visualisation), highlighting opportunities for instruction along the way. We also present a series of questions for discussion.  In each step, an incremental improvement is made, emphasizing to students the iterative process of creating an effective data visualization. 

The visuzliations in this path is representative of the variety of those created by students across multiple semesters of doing this assignment in introductory courses. 

### Step 1. Get the data {-}

The dataset provided in the report is in the following format.

```{r echo=FALSE, message=FALSE}
staff_wide <- read_csv("data/instructional-staff.csv")
staff_wide %>% kable()
```

1. What does each row represent in the dataset? What does each column represent? What do the numbers represent? What does each column add up to, and why?

### Step 2. Reshape the data {-}

[TO DO: SOME LANGUAGE AROUND WE NEED PERCENTAGES TO BE IN A COLUMN]

```{r}
staff_long <- staff_wide %>%
  pivot_longer(cols = -faculty_type, names_to = "year", 
               values_to = "percentage") %>%
  mutate(percentage = as.numeric(percentage))

staff_long %>%
  print(n = 5)
```

2. What does each row represent? How does this differ from what each row represents in `staff_wide`?

### Step 3. Recreate the plot {-}

We've made some improvement on the original visualization, but still something is not right... 

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, color = faculty_type)) +
  geom_col(position = "dodge") + 
  coord_flip()
```

This is much better...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, fill = faculty_type)) +
  geom_col(position = "dodge") + 
  coord_flip()
```

3. In what way(s) is this plot an improvement on the original "drab" visualization?
4. In what way(s) is the main message still unclear / hidden?

### Step 4. Improve the plot {-}

Next, let's try a segmented bar plot. This tells the story even better...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, fill = faculty_type)) +
  geom_col() + 
  coord_flip()
```

5. In what way(s) is the segmented bar plot an improvement on the the side-by-side bar plot from the previous step? 
6. In what way(s) is the main message still unclear / hidden?

But lines would be better...

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, group = faculty_type, 
             color = faculty_type)) +
  geom_line()
```

The lines are an improvement over the bars, but let's take a look at the x-axis. When the data was reshaped in Step 1, `year` was stored as a character type `staff_long`. Therefore, the yars are equally spaced in our visualization, giving the impression that the data were collected at equally spaced time intervals. 

Let's update `year` and add points to the visualization, so one can more easily see the years in the dataset. 


```{r}
staff_long <- staff_long %>%
  mutate(year = as.numeric(year))
```

```{r}
staff_long %>%
  ggplot(aes(x = year, y = percentage, group = faculty_type, 
             color = faculty_type)) +
  geom_point(size = 0.5) +
  geom_line()
```

Now we can take it even one step further...

```{r}
staff_long %>%
  mutate(part_time = if_else(faculty_type == "Part-Time Faculty", "Part-Time Faculty", "Other Faculty")) %>%
  ggplot(aes(x = year, y = percentage/100, group = faculty_type, 
             color = part_time)) +
  geom_point(size = 0.5) +
  geom_line() +
  scale_color_manual(values = c("gray", "red"))
```

Now the main message of the story is clear: the highest proportion of instructors are part-time faculty, and this proportion has been increasing from 1975 to 2011. In the previous line plots, it was unclear where one should focus their attention since each faculty type was a distinct and vibrant color. By making the lines for the other faculty levels gray, one is still able to see the trends for those faculty types without distracting from the trend of the primary faculty type of interest in this story, part-time faculty.

### Step 5. Pushing it a bit more {-}

```{r}
staff_long %>%
  mutate(part_time = if_else(faculty_type == "Part-Time Faculty", "Part-Time Faculty", "Other Faculty")) %>%
  ggplot(aes(x = year, y = percentage/100, group = faculty_type, 
             color = part_time)) +
  geom_point(size = 0.5) +
  geom_line() +
  scale_color_manual(values = c("gray", "red")) +
  scale_y_continuous(labels = percent_format(accuracy = 1)) +
  theme_minimal() +
  labs(
    title = "Instructional staff employment trends",
    x = "Year",
    y = "Percentage",
    color = ""
  ) +
  theme(legend.position = "bottom")
```



## Similar exercises

[TO DO: OTHER EXAMPLES? NOT WORKED OUT IN AS MUCH DETAIL, BUT MAYBE POINTING TO SOME BAD VIZ AND DATA TO GO WITH IT?]

## Conclusion

[TO DO: A CONCLUDING PARAGRAPH]

## Further reading {-}

1. Joshua Katz, Dialect Survey - joshkatz.co/dialect.html
2. David Robinson, Text analysis of Trump's tweets confirms he writes only the (angrier) Android half - http://varianceexplained.org/r/trump-tweets/
2. 
